webpackJsonp([76],{jn0V:function(t,e){},rx6R:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("Gu7T"),l=o.n(a),i=o("prc4"),s=o("qKdJ"),n={data:function(){return{imageUrl:"",nodeList:[{title:"",content:""}],allSelect:[],option1:[],deleBatch:[],isGetFather:!1,formSearch:{current:1,size:10},formSearch1:{type:2,current:1,size:10},formPush:{},formData:[],formData1:[],formUpdate:{},total:0,total1:0,pages:0,addDialog:!1,updateDialog:!1,dataTree:[],uploadToRealPath:"/park/upload/file/upload",defaultProps:{children:"children",label:"label"},defaultProps2:{children:"children",label:"name",value:"id",expandTrigger:"hover"},headers:{Authorization:sessionStorage.getItem("Authorization"),token:sessionStorage.getItem("token")},xqTree:[],rules:{title:[{required:!0,message:"该项不能为空",trigger:"change"}],content:[{required:!0,message:"该项不能为空",trigger:"change"}]}}},methods:{addCont:function(){this.nodeList.push({title:"",content:""})},gethouseLIst:function(){var t=this;houseList(this.formSearch1).then(function(e){console.log(e),200==e.data.code?(t.formData1=e.data.data.records.filter(function(e){return e.gmtModified&&(e.gmtModified=t.$root.getDateArray(e.gmtModified)[9]),e}),t.total1=e.data.data.total,t.pages=e.data.pages):t.$message(e.data.msg)})},handleCurrentPage1:function(t){this.formSearch1.current=t,this.gethouseLIst()},onChange:function(t,e){console.log(t,e),this.dialogImageUrl=URL.createObjectURL(t.raw),this.fileList=e},handleRemove:function(t,e){console.log(res,t),this.imageUrl=URL.createObjectURL(t.raw),this.formPush.coverImg=res.data[0]},handleAvatarSuccess:function(t,e){console.log(t,e),this.imageUrl=URL.createObjectURL(e.raw),this.formPush.coverImg=t.data[0]},handleAvatarSuccess1:function(t,e){var o=this;console.log(t,e),this.pictrueNum++,this.formPush.coverVideo=t.data[0]+","+this.formPush.coverVideo,this.pictrueNum==this.fileList.length&&addshopinfo(this.formPush).then(function(t){console.log(t),200==t.data.code?(o.getlist(),o.$message({message:"添加成功",type:"success"})):o.$message("添加失败:"+t.data.msg)})},getlist:function(){var t=this;Object(s._50)(this.formSearch).then(function(e){console.log(e),200==e.data.code?(t.formData=e.data.data.records.filter(function(t){return t}),t.total=e.data.data.total):t.$message(e.data.msg)})},getInit:function(){this.getlist()},addList:function(t){var e=this;this.formPush.nodeList=[],this.nodeList.forEach(function(t){e.formPush.nodeList.push(t)}),this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;Object(s.x)(e.formPush).then(function(t){console.log(t),200==t.data.code?(e.getlist(),e.$message({message:"添加成功",type:"success"})):e.$message("添加失败")}),e.addDialog=!1})},deleInfor:function(t){var e=this,o=[];t&&o.push(t),0!=this.deleBatch.length&&this.deleBatch.filter(function(t){return o.push(t.id),t}),this.$confirm("确认删除吗？").then(function(t){Object(s._7)(o).then(function(t){console.log(t),200==t.data.code&&(e.$message("删除成功"),e.getInit())})}).catch(function(t){})},toggleSelection:function(t){var e=this;if(console.log(t,this.formData),t){for(var o=[],a=function(a){console.log(e.formData.find(function(e){return e.id==t[a].id})),e.formData.find(function(e){return e.id==t[a].id})&&o.push(e.formData[0])},l=0;l<t.length;l++)a(l);console.log(o),console.log(o[0]==this.formData[0]),o.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)})}else this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(t,e){this.deleBatch=t;var o={},a=t.find(function(t){return t.id==e.id});console.log(a),a?(this.allSelect=[].concat(l()(this.allSelect),l()(t)),this.allSelect=this.allSelect.reduce(function(t,e){return!o[e.id]&&(o[e.id]=t.push(e)),t},[])):this.allSelect=this.allSelect.filter(function(t){return t.id!=e.id}),console.log(this.allSelect)},handleCurrentPage:function(t){this.formSearch.current=t,this.getInit()},checkTreeInfor:function(t,e){e.checkedKeys.length>1?this.$message("只能选择一个组织"):(this.formPush.orgId=e.checkedKeys[0],this.formUpdate.orgId=e.checkedKeys[0])},updateShowBox:function(t){var e=this;this.formUpdate={gmtCreate:t.gmtCreate,nodeList:t.nodeList,id:t.id,title:t.title,type:t.type},this.imageUrl=t.shopImage,this.updateDialog=!0,t.picture&&t.picture.split(",").forEach(function(t){var o={url:t};t&&e.fileList.push(o)}),console.log(this.formUpdate,this.fileList)},handleChange:function(t){var e=this;0!=t.length?(console.log(t),this.formSearch.orgId=this.$refs.cascader.getCheckedNodes()[0].data.id):this.formSearch.orgId="",Object(s._50)(this.formSearch).then(function(t){console.log(t),200==t.data.code?(e.formData=t.data.data.records.filter(function(t){return t}),e.total=t.data.data.total):e.$message(t.data.msg)})}},mounted:function(){this.getInit()},components:{paging:i.a}},r={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"modlude"},[o("el-form",{staticClass:"form_inline",attrs:{inline:!0,model:t.formSearch,"label-width":"80px"}},[o("el-form-item",[o("el-button",{attrs:{size:"small"},on:{click:t.getInit}},[t._v("查 询")])],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{size:"small"},on:{click:function(e){t.addDialog=!0}}},[t._v("添 加")])],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){return t.deleInfor(!1)}}},[t._v("批量删除")])],1)],1),t._v(" "),o("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.formData,stripe:""},on:{select:t.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),o("el-table-column",{attrs:{prop:"id",label:"id"}}),t._v(" "),o("el-table-column",{attrs:{prop:"title",label:"标题"}}),t._v(" "),o("el-table-column",{attrs:{prop:"gmtCreate",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.gmtCreate?[t._v("\n          "+t._s(t.$root.getDateArray(e.row.gmtCreate)[9])+"\n        ")]:void 0}}],null,!0)}),t._v(" "),o("el-table-column",{attrs:{prop:"type",label:"类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n  \t\t"+t._s(1==e.row.type?"公共交通线路":2==e.row.type?"自驾路线":"图片带详情介绍")+"\n  \t")]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"操作",fixed:"right",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(o){return t.deleInfor(e.row.id)}}},[t._v("删 除")]),t._v(" "),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(o){t.updateShowBox(e.row),t.detailsDialog=!1}}},[t._v("查看详情")])]}}])})],1),t._v(" "),o("paging",{attrs:{"get-total":t.total},on:{changePage:t.handleCurrentPage}}),t._v(" "),o("el-dialog",{attrs:{title:"新增",visible:t.addDialog},on:{"update:visible":function(e){t.addDialog=e}}},[o("div",{staticClass:"cont_box_left"},[o("el-form",{ref:"addList",attrs:{"label-position":"right","label-width":"110px",model:t.formPush,rules:t.rules}},[o("el-form-item",{attrs:{label:"标题",prop:"title"}},[o("el-input",{model:{value:t.formPush.title,callback:function(e){t.$set(t.formPush,"title",e)},expression:"formPush.title"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"类型",size:"small"}},[o("el-select",{attrs:{placeholder:"请选择出行类型",prop:"advertType"},model:{value:t.formPush.type,callback:function(e){t.$set(t.formPush,"type",e)},expression:"formPush.type"}},[o("el-option",{attrs:{label:"公共交通线路",value:1}}),t._v(" "),o("el-option",{attrs:{label:"自驾路线",value:2}})],1)],1),t._v(" "),t._l(t.nodeList,function(e,a){return o("div",{key:a},[o("el-form-item",{attrs:{label:"标路线标题",size:"small"}},[o("el-input",{model:{value:e.title,callback:function(o){t.$set(e,"title",o)},expression:"item.title"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"内容",size:"small"}},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.content,callback:function(o){t.$set(e,"content",o)},expression:"item.content"}})],1)],1)}),t._v(" "),o("el-form-item",{attrs:{label:"自定义",size:"small"}},[o("el-button",{attrs:{size:"medium "},on:{click:t.addCont}},[t._v("添 加")])],1)],2)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"medium "},on:{click:function(e){t.addDialog=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{size:"medium "},on:{click:function(e){return t.addList("addList")}}},[t._v("新 增")])],1)]),t._v(" "),o("el-dialog",{attrs:{title:"修改",visible:t.updateDialog},on:{"update:visible":function(e){t.updateDialog=e}}},[o("div",{staticClass:"cont_box_left"},[o("el-form",{ref:"formUpdate",attrs:{"label-position":"right",rules:t.rules,"label-width":"110px",model:t.formUpdate}},[o("el-form-item",{attrs:{label:"公园id"}},[o("el-input",{model:{value:t.formUpdate.id,callback:function(e){t.$set(t.formUpdate,"id",e)},expression:"formUpdate.id"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"创建时间"}},[o("el-date-picker",{attrs:{type:"datetime","value-format":"timestamp",placeholder:"创建时间"},model:{value:t.formUpdate.gmtCreate,callback:function(e){t.$set(t.formUpdate,"gmtCreate",e)},expression:"formUpdate.gmtCreate"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"标题"}},[o("el-input",{model:{value:t.formUpdate.title,callback:function(e){t.$set(t.formUpdate,"title",e)},expression:"formUpdate.title"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"类型",size:"small"}},[o("el-input",{model:{value:1==t.formUpdate.type?"公共交通线路":2==t.formUpdate.type?"自驾路线":"",callback:function(e){t.$set(1==t.formUpdate.type?"公共交通线路":t.formUpdate,"type==2?'自驾路线':''",e)},expression:"formUpdate.type==1?'公共交通线路':formUpdate.type==2?'自驾路线':''"}})],1),t._v(" "),t._l(t.formUpdate.nodeList,function(e,a){return o("div",{key:a},[o("el-form-item",{attrs:{label:"路线标题",size:"small"}},[o("el-input",{model:{value:e.title,callback:function(o){t.$set(e,"title",o)},expression:"item.title"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"内容",size:"small"}},[o("el-input",{model:{value:e.content,callback:function(o){t.$set(e,"content",o)},expression:"item.content"}})],1)],1)})],2)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"medium"},on:{click:function(e){t.updateDialog=!1}}},[t._v("取 消")])],1)])],1)},staticRenderFns:[]};var c=o("VU/8")(n,r,!1,function(t){o("jn0V")},"data-v-214de27e",null);e.default=c.exports}});
//# sourceMappingURL=76.2e1e86eda5d14d7d7c82.js.map