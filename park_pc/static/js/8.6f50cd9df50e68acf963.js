webpackJsonp([8,55,62],{"3wKt":function(t,e){},"9/bk":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("sZJm"),i=a("IC28"),o={data:function(){return{isActive:1}},methods:{changeActive:function(t){this.isActive=t}},components:{ipsAppBanner:s.default,ipsDeviceAdvertising:i.default}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"nav_options",staticStyle:{"margin-bottom":"20px"}},[a("div",{staticClass:"nav_option",class:{nav_option_active:1==t.isActive},on:{click:function(e){return t.changeActive(1)}}},[a("span",{staticClass:"txt"},[t._v("管家app")])]),t._v(" "),a("div",{staticClass:"nav_option",class:{nav_option_active:2==t.isActive},on:{click:function(e){return t.changeActive(2)}}},[a("span",[t._v("小程序")])]),t._v(" "),a("div",{staticClass:"nav_option",class:{nav_option_active:3==t.isActive},on:{click:function(e){return t.changeActive(3)}}},[a("span",[t._v("门户")])]),t._v(" "),a("div",{staticClass:"nav_option",class:{nav_option_active:4==t.isActive},on:{click:function(e){return t.changeActive(4)}}},[a("span",[t._v("智能设备")])])]),t._v(" "),1==t.isActive?a("ipsAppBanner"):t._e()],1)},staticRenderFns:[]};var l=a("VU/8")(o,r,!1,function(t){a("3wKt")},null,null);e.default=l.exports},IC28:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Gu7T"),i=a.n(s),o=a("prc4"),r=a("Cjew"),l=a("qKdJ"),n={data:function(){return{uploadToRealPath:"/park/upload/file/upload",headers:{Authorization:sessionStorage.getItem("Authorization"),token:sessionStorage.getItem("token")},imageUrl:"",videoUrl:"",devDialog:!1,pushSelect:0,allSelect:[],option1:[],devListt:"",deleBatch:[],isGetFather:!1,formSearch:{current:1,size:10},formSearch1:{current:1,size:10},formPush:{},formData:[],formData1:[],formUpdate:{},total:0,total1:0,pages:0,addDialog:!1,updateDialog:!1,dataTree:[],defaultProps:{children:"children",label:"label"},defaultProps2:{children:"children",label:"name",value:"id",expandTrigger:"hover",checkStrictly:!0},xqTree:[],devList:[],rules:{phone:[{required:!0,message:"该项不能为空"}],ubicellJyh:[{required:!0,message:"该项不能为空"}],addUser:[{required:!0,message:"该项不能为空",trigger:"change"}],getCall:[{required:!0,message:"该项不能为空",trigger:"change"}],xqId:[{required:!0,message:"该项不能为空",trigger:"change"}],houseId:[{required:!0,message:"该项不能为空",trigger:"change"}],userType:[{required:!0,message:"该项不能为空",trigger:"change"}]},xqId:""}},methods:{nextt:function(){var t=this;this.devDialog=!0,this.$nextTick(function(){t.xqId=t.formPush.xqId||t.xqTree[0].id,t.devList=t.formPush.devIds,console.log(t.formPush.devIds)})},handleAvatarSuccess1:function(t,e,a){console.log(t,e),this.formPush.imgAddress=t.data[0],this.imageUrl=URL.createObjectURL(e.raw),console.log(this.formPush.imgAddress)},handleAvatarSuccess2:function(t,e,a){console.log(t,e),this.formPush.videoAddress=t.data[0],this.videoUrl=URL.createObjectURL(e.raw)},handleRemove:function(t,e){console.log(t,e),this.fileList=e},selected:function(t){var e=this;this.pushSelect=0,0!=t.length&&(this.devListt="",this.formPush.devIds=[],t=t.filter(function(t){t.devSn,t.devType,t.doorkeySign,t.id,t.name,t.ncuSn,t.viceDevice;return e.formPush.devIds.push(t.id),e.devListt=e.devListt+t.name+"，",t}),this.devListt=this.devListt.substring(0,this.devListt.length-1)),console.log(t),this.devDialog=!1},gethouseLIst:function(){},handleCurrentPage1:function(t){this.formSearch1.current=t,this.gethouseLIst()},getlist:function(){var t=this;Object(l._51)(this.formSearch).then(function(e){console.log(e),200==e.data.code?(t.formData=e.data.data.records.filter(function(e){return e.gmtCreate&&(e.gmtCreate=t.$root.getDateArray(e.gmtCreate)[9]),e}),t.$nextTick(function(){t.total=e.data.data.total})):t.$message(e.data.msg)})},getInit:function(){this.getlist(),this.gethouseLIst()},addList:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;Object(l._79)(e.formPush).then(function(t){console.log(t),200==t.data.code?(e.getlist(),e.$message({message:"添加成功",type:"success"})):e.$message("添加失败")}),e.addDialog=!1})},updateList:function(){var t=this;console.log(this.formUpdate),updategetVillageAD(this.formUpdate).then(function(e){console.log(e),200==e.data.code&&(t.$message({message:"修改成功",type:"warning"}),t.getInit())}),this.updateDialog=!1},deleInfor:function(t){var e=this,a=[];t?a.push(t):0!=this.deleBatch.length&&this.deleBatch.filter(function(t){return a.push(t.id),t}),this.$confirm("确认删除吗？").then(function(a){Object(l._11)(t).then(function(t){console.log(t),200==t.data.code&&(e.$message("删除成功"),e.getInit())})}).catch(function(t){})},toggleSelection:function(t){var e=this;if(console.log(t,this.formData),t){for(var a=[],s=function(s){console.log(e.formData.find(function(e){return e.id==t[s].id})),e.formData.find(function(e){return e.id==t[s].id})&&a.push(e.formData[0])},i=0;i<t.length;i++)s(i);console.log(a),console.log(a[0]==this.formData[0]),a.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)})}else this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(t,e){this.deleBatch=t;var a={},s=t.find(function(t){return t.id==e.id});console.log(s),s?(this.allSelect=[].concat(i()(this.allSelect),i()(t)),this.allSelect=this.allSelect.reduce(function(t,e){return!a[e.id]&&(a[e.id]=t.push(e)),t},[])):this.allSelect=this.allSelect.filter(function(t){return t.id!=e.id}),console.log(this.allSelect)},handleCurrentPage:function(t){this.formSearch.current=t,this.getInit()},checkTreeInfor:function(t,e){e.checkedKeys.length>1?this.$message("只能选择一个组织"):(this.formPush.orgId=e.checkedKeys[0],this.formUpdate.orgId=e.checkedKeys[0])},updateShowBox:function(t){var e=this;this.formUpdate={videoAddress:t.videoAddress,title:t.title,imgAddress:t.imgAddress},this.imageUrl=t.shopImage,this.updateDialog=!0,t.picture&&t.picture.split(",").forEach(function(t){var a={url:t};t&&e.fileList.push(a)}),console.log(this.formUpdate,this.fileList)},zuzhiChange1:function(t){0!=t.length?(console.log(t),this.formSearch1.orgId=this.$refs.cascader1.getCheckedNodes()[0].data.id,this.formSearch.orgId=this.$refs.cascader1.getCheckedNodes()[0].data.id):(this.formSearch.orgId="",this.formSearch1.orgId=""),this.gethouseLIst(this.formSearch1)},handleChange:function(t){var e=this;0!=t.length?(console.log(t),this.formSearch1.orgId=this.$refs.cascader.getCheckedNodes()[0].data.id,this.formSearch.orgId=this.$refs.cascader.getCheckedNodes()[0].data.id):(this.formSearch.orgId="",this.formSearch1.orgId=""),Object(l._51)(this.formSearch).then(function(t){console.log(t),200==t.data.code?(e.formData=t.data.data.records.filter(function(t){return t.gmtCreate&&(t.gmtCreate=e.$root.getDateArray(t.gmtCreate)[9]),t}),e.total=t.data.data.total,e.pages=t.data.pages):e.$message(t.data.msg)})}},mounted:function(){this.getInit()},components:{paging:o.a,acsdev:r.a}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"modlude"},[a("el-form",{staticClass:"form_inline",attrs:{inline:!0,model:t.formSearch,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"照片或视频",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入照片或视频"},model:{value:t.formSearch.title,callback:function(e){t.$set(t.formSearch,"title",e)},expression:"formSearch.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"时间",size:"small"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"timestamp",placeholder:"开始时间"},model:{value:t.formSearch.startTime,callback:function(e){t.$set(t.formSearch,"startTime",e)},expression:"formSearch.startTime"}}),t._v(" "),a("span",{staticStyle:{color:"#a1d6f4"}},[t._v(" - ")]),t._v(" "),a("el-date-picker",{attrs:{type:"datetime","value-format":"timestamp",placeholder:"结束时间"},model:{value:t.formSearch.endTime,callback:function(e){t.$set(t.formSearch,"endTime",e)},expression:"formSearch.endTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"发送状态"}},[a("el-radio",{attrs:{label:1},model:{value:t.formSearch.isDel,callback:function(e){t.$set(t.formSearch,"isDel",e)},expression:"formSearch.isDel"}},[t._v("已删除")]),t._v(" "),a("el-radio",{attrs:{label:0},model:{value:t.formSearch.isDel,callback:function(e){t.$set(t.formSearch,"isDel",e)},expression:"formSearch.isDel"}},[t._v("投放中")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small"},on:{click:t.getlist}},[t._v("查 询")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.addDialog=!0}}},[t._v("添 加")])],1)],1),t._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.formData,stripe:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),t._v(" "),a("el-table-column",{attrs:{prop:"gmtCreate",label:"发送时间"}}),t._v(" "),a("el-table-column",{attrs:{label:"发送状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(1==e.row.isDel?"已删除":"投放中")+"\n\t\t\t\t")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.deleInfor(e.row.tid)}}},[t._v("删 除")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.updateShowBox(e.row),t.detailsDialog=!1}}},[t._v("详 情")])]}}])})],1),t._v(" "),a("paging",{attrs:{"get-total":t.total},on:{changePage:t.handleCurrentPage}}),t._v(" "),a("el-dialog",{attrs:{title:"新增",visible:t.addDialog,"close-on-click-modal":!1},on:{"update:visible":function(e){t.addDialog=e}}},[a("div",{staticClass:"cont_box_left"},[a("el-form",{ref:"addList",attrs:{"label-position":"right","label-width":"110px",model:t.formPush,rules:t.rules}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{model:{value:t.formPush.title,callback:function(e){t.$set(t.formPush,"title",e)},expression:"formPush.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"图片",size:"small"}},[a("el-upload",{ref:"addUpdata",staticClass:"avatar-uploader",attrs:{action:t.uploadToRealPath,headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess1,"on-remove":t.handleRemove}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"视频",size:"small"}},[a("el-upload",{ref:"addUpdata",staticClass:"avatar-uploader",attrs:{action:t.uploadToRealPath,headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess2,"on-remove":t.handleRemove}},[t.videoUrl?a("video",{staticClass:"avatar",attrs:{src:t.videoUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium "},on:{click:function(e){t.addDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"medium "},on:{click:function(e){return t.addList("addList")}}},[t._v("新 增")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"查看详情",visible:t.updateDialog,"close-on-click-modal":!1},on:{"update:visible":function(e){t.updateDialog=e}}},[a("div",{staticClass:"cont_box_left"},[a("el-form",{ref:"formUpdate",attrs:{"label-position":"right",rules:t.rules,"label-width":"110px",model:t.formUpdate}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{model:{value:t.formUpdate.title,callback:function(e){t.$set(t.formUpdate,"title",e)},expression:"formUpdate.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"图片",size:"small"}},[a("el-image",{staticStyle:{width:"120px",height:"120px"},attrs:{fit:"cover",src:t.formUpdate.imgAddress}})],1),t._v(" "),a("el-form-item",{attrs:{label:"视频",size:"small"}},[a("video",{staticClass:"avatar",attrs:{src:t.formUpdate.videoAddress}})])],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:function(e){t.updateDialog=!1}}},[t._v("取 消")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"选择设备",visible:t.devDialog,"close-on-click-modal":!1},on:{"update:visible":function(e){t.devDialog=e}}},[a("div",{staticClass:"cont_box_right"},[a("acsdev",{attrs:{"xq-id":t.xqId,"push-select":t.pushSelect,"huixian-select":t.devList},on:{selected:t.selected}})],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:function(e){t.pushSelect=1,t.devDialog=!1}}},[t._v("确 定")]),t._v(" "),a("el-button",{attrs:{size:"medium"},on:{click:function(e){t.devDialog=!1}}},[t._v("取 消")])],1)])],1)},staticRenderFns:[]};var d=a("VU/8")(n,c,!1,function(t){a("eAwV")},"data-v-55469327",null);e.default=d.exports},XH8K:function(t,e){},eAwV:function(t,e){},sZJm:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("bOdI"),i=a.n(s),o=a("qKdJ"),r={data:function(){var t;return t={option1:[],uploadToRealPath:"/park/upload/file/upload",headers:{Authorization:sessionStorage.getItem("Authorization"),token:sessionStorage.getItem("token")},formData:[],formSearch:{},formPush:{delIds:[],banners:[]},xqTree:[],dataTree:[]},i()(t,"formSearch",{orgId:"",xqId:""}),i()(t,"imageUrl",""),i()(t,"indexBianhao",0),i()(t,"imageUrl1",""),i()(t,"imageUrl2",""),i()(t,"defaultProps2",{children:"children",label:"name",value:"id",expandTrigger:"hover",checkStrictly:!0}),i()(t,"picArr",[]),t},methods:{getItem:function(t){console.log(t),this.indexBianhao=t},deleteVillage:function(t){this.formData.splice(t,1)},getlist:function(){var t=this;Object(o._93)({}).then(function(e){console.log(e),200==e.data.code?t.formData=e.data.data.filter(function(t){return t}):t.$message(e.data.msg)})},initData:function(){var t=this;Object(o._121)({}).then(function(e){console.log(e),200==e.data.code&&(t.xqTree=e.data.data,0!=t.xqTree.length&&(t.formSearch.xqId=t.xqTree[0].id,t.formPush.xqId=t.xqTree[0].id,t.getlist()))})},handleChange:function(t){0!=t.length?(console.log(t),this.formSearch.orgId=this.$refs.cascader.getCheckedNodes()[0].data.id):this.formSearch.orgId=""},upData:function(t){if(0!=t){var e={address:""},a={address:""};e.address=this.formData[t].address,a.address=this.formData[t-1].address,this.formData[t].address=a.address,this.formData[t-1].address=e.address}},downData:function(t){if(t!=this.formData.length-1){var e={address:""},a={address:""};e.address=this.formData[t].address,a.address=this.formData[t+1].address,this.formData[t].address=a.address,this.formData[t+1].address=e.address}},upCharu:function(){},downCharu:function(){},addData:function(){this.formData.push({appImg:"",portalImg:""})},saveData:function(){var t=this,e=[];this.formData.forEach(function(t){var a={};t.appImg&&(a={appImg:t.appImg}),t.portalImg&&(a={portalImg:t.portalImg}),e.push(a)}),this.formPush.banners=e,Object(o._108)(this.formPush).then(function(e){console.log(e),200==e.data.code?(t.getlist(),t.picArr=[],t.$message({message:"添加成功",type:"success"})):t.$message("添加失败")})},handleAvatarSuccess1:function(t,e,a){console.log(t,e,a),this.imageUrl=t.data[0],this.imageUrl1=URL.createObjectURL(e.raw),this.formData[this.indexBianhao].appImg=this.imageUrl,console.log(this.formData,this.indexBianhao)},handleAvatarSuccess2:function(t,e,a){console.log(t,e,a),this.imageUrl=t.data[0],this.imageUrl2=URL.createObjectURL(e.raw),this.formData[this.indexBianhao].portalImg=this.imageUrl,console.log(this.formData,this.indexBianhao)}},mounted:function(){this.getlist()}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"modlude"},[a("el-form",{staticClass:"form_inline",attrs:{inline:!0,model:t.formSearch,"label-width":"90px"}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.getlist}},[t._v("查询")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.addData}},[t._v("添加图片")])],1)],1),t._v(" "),a("div",{staticClass:"app_advertise"},t._l(t.formData,function(e,s){return a("div",{key:s,staticClass:"app_advertise_item",on:{click:function(e){return t.getItem(s)}}},[a("div",[t._v("位置"+t._s(s+1)+"--")]),t._v(" "),a("div",[t._v("小程序banner:")]),t._v(" "),a("div",{staticClass:"app_advertise_item_l"},[e.id?a("el-image",{staticStyle:{width:"178px",height:"178px"},attrs:{src:e.appImg}}):a("el-upload",{ref:"addUpdata",refInFor:!0,staticClass:"avatar-uploader",attrs:{action:t.uploadToRealPath,headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess1}},[t.imageUrl1?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl1}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("div",[t._v("门户banner:")]),t._v(" "),a("div",{staticClass:"app_advertise_item_l"},[e.id?a("el-image",{staticStyle:{width:"178px",height:"178px"},attrs:{src:e.portalImg}}):a("el-upload",{ref:"addUpdata",refInFor:!0,staticClass:"avatar-uploader",attrs:{action:t.uploadToRealPath,headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess2}},[t.imageUrl2?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl2}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.upData(s)}}},[t._v("上移")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.downData(s)}}},[t._v("下移")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.upCharu(s)}}},[t._v("向上插入")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.downCharu(s)}}},[t._v("向下插入")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.deleteVillage(s)}}},[t._v("删除")])],1)])}),0),t._v(" "),a("div",{staticStyle:{"margin-top":"20px","text-align":"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.saveData}},[t._v("保 存")])],1)],1)},staticRenderFns:[]};var n=a("VU/8")(r,l,!1,function(t){a("XH8K")},"data-v-45be88f1",null);e.default=n.exports}});
//# sourceMappingURL=8.6f50cd9df50e68acf963.js.map