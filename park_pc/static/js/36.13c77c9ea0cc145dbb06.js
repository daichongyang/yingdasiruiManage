webpackJsonp([36],{"0maR":function(t,e){},u3Hn:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("ZFl+"),o=i("qKdJ"),n={data:function(){return{radio1:"地图",formSearch:{current:1,size:10},asset:[],formUpdate:{points:[]},latLngList:[],formPush:{points:[],startId:"",endId:""},total:0,startlt:{latitude:"",longitude:""},endlt:{latitude:"",longitude:""},mapObj:{},latLng:[],geometries:[],formData:[],inforList:[]}},methods:{getList:function(){var t=this;Object(o._62)({}).then(function(e){t.radio1="列表",console.log(e),200==e.data.code&&(t.inforList=e.data.data)})},getlisttype1:function(t){console.log(t);var e=this,i={};this.asset.forEach(function(a){t==a.id&&(e.formPush.startType=a.type,i={lat:a.latitude,lng:a.longitude},e.startlt.latitude=a.latitude,e.startlt.longitude=a.longitude)}),this.mapObj.setCenter(new TMap.LatLng(i.lat,i.lng))},getlisttype2:function(t){console.log(t);var e=this,i={};this.asset.forEach(function(a){t==a.id&&(e.formPush.endType=a.type,i={lat:a.latitude,lng:a.longitude},e.endlt.latitude=a.latitude,e.endlt.longitude=a.longitude)}),this.mapObj.setCenter(new TMap.LatLng(i.lat,i.lng))},addList:function(t){var e=this;Object(o.i)(this.formPush).then(function(t){console.log(t),200==t.data.code?(e.$message({message:"添加成功",type:"success"}),e.formPush.points=[]):e.$message("添加失败")})},initList:function(){var t=this;Object(o.B)({}).then(function(e){console.log(e),200==e.data.code&&(t.asset=e.data.data)}),Object(o._33)({}).then(function(e){if(console.log(e),200==e.data.code){var i=t;t.formData=e.data.data.records.filter(function(t,e){console.log(t.latitude,t.longitude);var a={id:e,styleId:"myStyle",position:new TMap.LatLng(t.latitude,t.longitude),properties:{name:t.name,label:t.label,latitude:t.latitude,longitude:t.longitude}};return i.geometries.push(a),t}),t.getMarkerLayer(i.geometries),t.total=e.data.data.total}else t.$message(e.data.msg)})},goBack:function(){this.$router.go(-1)},playLine:function(t){console.log(t);var e=Math.random(),i=[];t.forEach(function(t){var e=new TMap.LatLng(t.properties.latitude,t.properties.longitude);i.push(e)});new TMap.MultiPolyline({id:e,map:this.mapObj,styles:{polyline:new TMap.PolylineStyle({color:"#00FF00",width:4,borderWidth:5,borderColor:"rgba(0,125,255,0.5)",lineCap:"round"})},geometries:[{id:"polyline",styleId:"polyline",paths:i,properties:{title:"customStyle"}}]})},addInfoWindow:function(t,e){console.log(e),new TMap.InfoWindow({map:this.mapObj,position:t,content:'<div class="tuxing_box2" style="position:relative;padding-bottom:20px;font-size:12px;min-height:100px;width:140px;padding:10px 10px;background:rgba(5,28,58,0.5);  border:1px solid #19dcf3;color:#19dcf3;border-radius:5px;"><div class="radio radio_right"></div><div style="position:relative;"><h5>智云谷</h5><span id="xiangqng" style="cursor: pointer;position:absolute;top:0;right:0;">详情</span></div><div><span>  深山合作区-英达斯瑞公园- </span><div>公园名称：'+e.name+'</div></div><div><span> 4573 </span></div><div><span>日均：1311</span></div><div><span>34℃ 湿度60% PM2.5 12gm/m³</span></div><div style="position: absolute;bottom: 0px;margin: 0px auto;height: 0px;width: 100%;clear: both;text-align: center;"><img style="z-index: 104;position: relative;" src="https://webapi.amap.com/images/sharp.png"></div></div>'})},initTmap:function(){var t=this;a.a.init().then(function(e){var i=new TMap.LatLng(22.831779,114.980945),a=new TMap.Map("container",{rotation:20,pitch:0,zoom:17,center:i});TMap.ImageTileLayer.createCustomLayer({layerId:"5f6b13185922",map:a}).then(function(t){t||console.log("fail")}),t.mapObj=a,t.changeStyle(),t.initList()})},changeLi:function(){this.radio1="列表",console.log(this.radio1)},changeStyle:function(){var t=this,e=new TMap.MultiMarker({id:"marker-layer",map:t.mapObj});t.mapObj.on("click",function(i){console.log(i.latLng),t.latLng.push(i.latLng),e.add({position:i.latLng});var a={latitude:i.latLng.lat,longitude:i.latLng.lng};t.formPush.points.push(a)})},getMarkerLayer:function(t){console.log(t);new TMap.MultiMarker({map:this.mapObj,styles:{myStyle:new TMap.MarkerStyle({width:25,height:35,src:"https://mapapi.qq.com/web/lbs/javascriptGL/demo/img/markerDefault.png",anchor:{x:16,y:32}})},geometries:t});0==t.length&&1==t.length||this.showWindow(t)},showWindow:function(t){var e=this;t.forEach(function(t){new TMap.InfoWindow({map:e.mapObj,position:new TMap.LatLng(t.properties.latitude,t.properties.longitude),content:t.properties.name})})},yulan:function(){var t=this;t.geometries=[],this.endlt&&this.formPush.points.push(this.endlt),this.startlt&&this.formPush.points.unshift(this.startlt),t.formPush.points.forEach(function(e){var i={properties:{latitude:e.latitude,longitude:e.longitude}};t.geometries.push(i)}),console.log(t.geometries),this.playLine(t.geometries)}},mounted:function(){this.initTmap()}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"modlude"},[i("p",{staticClass:"margintop"}),t._v(" "),i("el-form",{staticClass:"gridContt",attrs:{"label-width":""}},[i("el-form-item",{attrs:{size:"small",label:"显示切换"}},[i("el-radio-group",{model:{value:t.radio1,callback:function(e){t.radio1=e},expression:"radio1"}},[i("el-radio-button",{attrs:{label:"地图"}}),t._v(" "),i("el-radio-button",{attrs:{label:"列表"},on:{click:t.getList}})],1)],1)],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"列表"==t.radio1,expression:"radio1=='列表'"}],staticClass:"tuxing"}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"地图"==t.radio1,expression:"radio1 == '地图'"}],staticClass:"openMap"},[i("div",{staticClass:"right_infor"},[i("el-form",{ref:"formUpdate",attrs:{"label-position":"right","label-width":"90px",model:t.formPush}},[i("el-form-item",{attrs:{label:"请选择起点",size:"small",prop:"xqId"}},[i("el-select",{on:{change:t.getlisttype1},model:{value:t.formPush.startId,callback:function(e){t.$set(t.formPush,"startId",e)},expression:"formPush.startId"}},t._l(t.asset,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),i("el-form-item",{attrs:{label:"请选择终点",size:"small",prop:"xqId"}},[i("el-select",{on:{change:t.getlisttype2},model:{value:t.formPush.endId,callback:function(e){t.$set(t.formPush,"endId",e)},expression:"formPush.endId"}},t._l(t.asset,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)],1),t._v(" "),t._l(t.formPush.points,function(e,a){return i("div",{key:a,staticClass:"font_size",staticStyle:{"margin-bottom":"10px"}},[i("p",[t._v("进度:"+t._s(e.latitude))]),t._v(" "),i("p",[t._v("进度:"+t._s(e.longitude))])])}),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"medium "},on:{click:function(e){return t.addList("addList")}}},[t._v("新 增")]),t._v(" "),i("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:t.yulan}},[t._v("预览")])],1)],2)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"地图"==t.radio1,expression:"radio1 == '地图'"}],staticClass:"baidumap",attrs:{id:"container"}})],1)},staticRenderFns:[]};var l=i("VU/8")(n,s,!1,function(t){i("0maR")},"data-v-910f34ec",null);e.default=l.exports}});
//# sourceMappingURL=36.13c77c9ea0cc145dbb06.js.map