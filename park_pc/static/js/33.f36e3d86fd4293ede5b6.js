webpackJsonp([33],{lt4g:function(t,e){},xGa2:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("bOdI"),s=a.n(i),o=a("qKdJ"),l={data:function(){var t;return t={typeselect:{},uploadToRealPath:"/intellmanagerV3.0/upload/file/upload",headers:{Authorization:sessionStorage.getItem("Authorization"),token:sessionStorage.getItem("token")},addDialog:!1,formData:[],formSearch:{},formPush:{delIds:[],pictureNodes:[]},xqTree:[],dataTree:[],dataTree1:[]},s()(t,"formSearch",{}),s()(t,"imageUrl",""),s()(t,"indexBianhao",0),s()(t,"imageUrl1",""),s()(t,"defaultProps2",{children:"children",label:"name",value:"id",expandTrigger:"hover",checkStrictly:!0}),s()(t,"picArr",[]),t},methods:{changeType:function(t){var e=this,a={type:t};Object(o._50)(a).then(function(t){console.log(t),200==t.data.code&&(e.dataTree1=t.data.data)})},getItem:function(t){console.log(t),this.indexBianhao=t},deleteVillage:function(t){var e=this;this.$confirm("确认删除吗？").then(function(a){e.formData.splice(t,1);var i=[];e.formData.forEach(function(t){var e={facilityId:t.facilityId,type:t.type};i.push(e)}),e.formPush=i,Object(o._52)(e.formPush).then(function(t){console.log(t),200==t.data.code?(e.getlist(),e.$message({message:"删除成功",type:"success"})):e.$message("删除失败")})}).catch(function(t){})},getlist:function(){var t=this,e=this.formSearch;Object(o._49)(e).then(function(e){console.log(e),200==e.data.code?t.formData=e.data.data.filter(function(t){return t}):t.$message(e.data.msg)})},initData:function(){var t=this;Object(o._51)({}).then(function(e){console.log(e),200==e.data.code&&(t.dataTree=e.data.data)}),this.getlist()},handleChange:function(t){0!=t.length?(console.log(t),this.formSearch.orgId=this.$refs.cascader.getCheckedNodes()[0].data.id):this.formSearch.orgId=""},upData:function(t){if(0!=t){var e={facilityId:"",type:""},a={facilityId:"",type:""};e.facilityId=this.formData[t].facilityId,e.type=this.formData[t].type,a.facilityId=this.formData[t-1].facilityId,a.type=this.formData[t-1].type,this.formData[t].facilityId=a.facilityId,this.formData[t].type=a.type,this.formData[t-1].facilityId=e.facilityId,this.formData[t-1].type=e.type,this.typeselect={},this.saveData()}},downData:function(t){if(t!=this.formData.length-1){var e={facilityId:"",type:""},a={facilityId:"",type:""};e.facilityId=this.formData[t].facilityId,e.type=this.formData[t].type,a.facilityId=this.formData[t+1].facilityId,a.type=this.formData[t+1].type,this.formData[t].facilityId=a.facilityId,this.formData[t].type=a.type,this.formData[t+1].facilityId=e.facilityId,this.formData[t+1].type=e.type,this.typeselect={},this.saveData()}},upCharu:function(){},downCharu:function(){},addData:function(){9!=this.formData.length?this.addDialog=!0:this.$message({message:"最多只能添加9个推荐"})},saveData:function(){var t=this,e=[];this.typeselect.type&&e.push(this.typeselect),this.formData.forEach(function(t){var a={facilityId:t.facilityId,type:t.type};e.push(a)}),this.formPush=e,Object(o._52)(this.formPush).then(function(e){console.log(e),200==e.data.code?(t.getlist(),t.$message({message:"操作成功",type:"success"})):t.$message("操作失败")}),this.addDialog=!1},handleAvatarSuccess1:function(t,e,a){console.log(t,e,a),this.imageUrl=t.data[0],this.imageUrl1=URL.createObjectURL(e.raw),this.formData[this.indexBianhao].address=this.imageUrl,console.log(this.formData,this.indexBianhao)}},mounted:function(){this.initData()}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"modlude"},[a("el-form",{staticClass:"form_inline",attrs:{inline:!0,model:t.formSearch,"label-width":"90px"}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.getlist}},[t._v("查询")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.addData}},[t._v("添加图片")])],1)],1),t._v(" "),a("div",{staticClass:"app_advertise"},t._l(t.formData,function(e,i){return a("div",{key:i,staticClass:"app_advertise_item",on:{click:function(e){return t.getItem(i)}}},[a("div",[t._v("位置"+t._s(i+1))]),t._v(" "),a("div",{staticStyle:{"margin-left":"30px",width:"200px"}},[a("span",[t._v("名称："+t._s(e.name))])]),t._v(" "),a("div",{staticClass:"app_advertise_item_l"},[e.id?a("el-image",{staticStyle:{width:"150px",height:"90px"},attrs:{src:e.coverImg}}):t._e()],1),t._v(" "),a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.upData(i)}}},[t._v("上移")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.downData(i)}}},[t._v("下移")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.upCharu(i)}}},[t._v("向上插入")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.downCharu(i)}}},[t._v("向下插入")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.deleteVillage(i)}}},[t._v("删除")])],1)])}),0),t._v(" "),a("el-dialog",{attrs:{title:"添加推荐",visible:t.addDialog},on:{"update:visible":function(e){t.addDialog=e}}},[a("el-form",{staticClass:"form_inline",attrs:{inline:!0,model:t.formSearch,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"推荐设施类型",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择推荐设施类型"},on:{change:t.changeType},model:{value:t.typeselect.type,callback:function(e){t.$set(t.typeselect,"type",e)},expression:"typeselect.type"}},t._l(t.dataTree,function(t){return a("el-option",{key:t.id,attrs:{label:t.typeName,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"公园设施",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择公园设施"},model:{value:t.typeselect.facilityId,callback:function(e){t.$set(t.typeselect,"facilityId",e)},expression:"typeselect.facilityId"}},t._l(t.dataTree1,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)],1),t._v(" "),a("div",{staticStyle:{"margin-top":"20px","text-align":"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.saveData}},[t._v("添 加")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(l,n,!1,function(t){a("lt4g")},"data-v-b09cb404",null);e.default=r.exports}});
//# sourceMappingURL=33.f36e3d86fd4293ede5b6.js.map