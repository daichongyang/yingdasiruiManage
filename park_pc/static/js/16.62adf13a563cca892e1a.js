webpackJsonp([16],{"3drp":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,o=n("bOdI"),s=n.n(o),i=n("qKdJ"),r={data:function(){var t;return t={isActive:1,total:1,inforList:[],pages:1,apartmentId:"",formSearch:{current:1,size:10},addORupdate:0,addFormVisible1:!1,updataVisible:!1,selectArr:[],getGateWayList:[],sels:[],listLoading:!1},s()(t,"sels",[]),s()(t,"inforList2",{}),s()(t,"checkList",[]),s()(t,"checkInfor",{msgType:0,size:10,current:1}),s()(t,"addForm",{apartmentName:"",linkman:"",phone:"",createTime:"",comment:"",remark:""}),s()(t,"updataForm",{}),s()(t,"noRead",{}),s()(t,"path","ws://192.168.0.142:8082/park/ist?appId="+sessionStorage.getItem("Authorization")),s()(t,"socket",""),t},methods:(a={init:function(){"undefined"==typeof WebSocket?alert("您的浏览器不支持socket"):(this.socket=new WebSocket(this.path),this.socket.onopen=this.open,this.socket.onerror=this.error,this.socket.onmessage=this.getMessage)},open:function(){console.log("socket连接成功")},error:function(){console.log("连接错误")},getMessage:function(t){console.log(t),this.inforList2=JSON.parse(t.data),this.open(),console.log(this.inforList2)},send:function(){this.socket.send("liyu")},close:function(){console.log("socket已经关闭")},changeActive:function(t){var e=this;this.isActive=t,Object(i._68)(this.formSearch).then(function(t){console.log(t),200==t.data.code?(e.inforList=t.data.data.records.filter(function(t){return t}),e.total=t.data.data.total):e.$message(t.data.msg)})},addShebei:function(){this.addORupdate=0,this.addForm={},this.addFormVisible1=!0},handleSelectionChange:function(t,e){this.deleBatch=t,console.log(this.deleBatch)},changeItem:function(t,e){this.addFormVisible=!0,this.addForm.apartmentName=e.apartmentName,this.addForm.remark=e.remark,this.addForm.linkman=e.linkman,this.addForm.phone=e.phone,this.addForm.createTime=e.createTime,this.addForm.comment=e.comment,this.addForm.reservationId=e.reservationId},updateShowBox:function(t){var e=this,n=[];t?n.push(t):0!=this.deleBatch.length&&this.deleBatch.filter(function(t){return n.push(t.id),t}),this.$confirm("确认受理案件吗？").then(function(t){Object(i._87)(n).then(function(t){console.log(t),200==t.data.code&&(e.$message("受理成功"),e.changeActive(1))})}).catch(function(t){})},pushInfor:function(){var t=this,e={reservationId:this.addForm.reservationId,remark:this.addForm.remark};console.log(e),reservationRemark(e).then(function(e){console.log(e),t.addFormVisible=!1,200===e.data.code?t.getList():alert(e.data.msg)})},useqrcode:function(){this.QueryDetail="shdak";var t=document.getElementById("canvas");QRCode.toCanvas(t,this.QueryDetail,function(t){t&&console.error(t),console.log("success!")})},handleCurrentChange:function(t){this.checkInfor.current=t,this.getList(this.checkInfor.msgType)},changeHouseList:function(t){var e=this,n={apartmentId:this.apartmentId,current:t};console.log(n),assignList(n).then(function(t){console.log(t),200===t.data.code&&(e.houseAssignList=t.data.data.records)})}},s()(a,"open",function(){var t='<div style="width:250px;"><div style="display:flex;align-items: center;justify-content: space-between;"><span>'+this.inforList2.type==1?"sos报警":(this.inforList2.type,"未知");this.inforList2.gmtCreate,this.$notify({title:"报警",dangerouslyUseHTMLString:!0,duration:0,position:"bottom-right",message:t})}),s()(a,"selsChange",function(t){this.sels=t.filter(function(t){if(1!==t.isExist)return t})}),a),mounted:function(){this.changeActive(1),this.init()}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"modlude"},[n("div",{staticClass:"nav_options",staticStyle:{"margin-bottom":"20px"}},[n("div",{staticClass:"nav_option",class:{nav_option_active:1==t.isActive},on:{click:function(e){return t.changeActive(1)}}},[n("el-badge",{staticClass:"item",attrs:{value:t.noRead.financeNum,max:99}},[n("span",{staticClass:"txt"},[t._v("报警信息")])])],1),t._v(" "),n("div",{staticClass:"nav_option",class:{nav_option_active:2==t.isActive},on:{click:function(e){return t.changeActive(2)}}},[n("span",[t._v("公告通知")])]),t._v(" "),n("div",{staticClass:"nav_option",class:{nav_option_active:3==t.isActive},on:{click:function(e){return t.changeActive(3)}}},[n("span",[t._v("支付信息")])]),t._v(" "),n("div",{staticClass:"nav_option",class:{nav_option_active:4==t.isActive},on:{click:function(e){return t.changeActive(4)}}},[n("span",[t._v("服务信息")])])]),t._v(" "),1==t.isActive?n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.inforList,stripe:""},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{prop:"",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.gmtCreate?[t._v("\n          "+t._s(t.$root.getDateArray(e.row.gmtCreate)[9])+"\n        ")]:void 0}}],null,!0)}),t._v(" "),n("el-table-column",{attrs:{prop:"",label:"修改时间"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.gmtModified?[t._v("\n            "+t._s(t.$root.getDateArray(e.row.gmtModified)[9])+"\n          ")]:void 0}}],null,!0)}),t._v(" "),n("el-table-column",{attrs:{prop:"id",label:"id"}}),t._v(" "),n("el-table-column",{attrs:{prop:"latitude",label:"纬度"}}),t._v(" "),n("el-table-column",{attrs:{prop:"longitude",label:"经度"}}),t._v(" "),n("el-table-column",{attrs:{prop:"remark",label:"备注"}}),t._v(" "),n("el-table-column",{attrs:{prop:"score",label:"评论"}}),t._v(" "),n("el-table-column",{attrs:{prop:"nickname",label:"报警人姓名"}}),t._v(" "),n("el-table-column",{attrs:{prop:"phone",label:"报警人手机号"}}),t._v(" "),n("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n       \t\t"+t._s(1==e.row.status?"未处理":2==e.row.status?"处理中":"处理完成")+"\n       \t")]}}],null,!1,1141193935)}),t._v(" "),n("el-table-column",{attrs:{prop:"userId",label:"用户"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",fixed:"right",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(n){return t.updateShowBox(e.row.id)}}},[t._v(t._s(1==e.row.status?"未处理":2==e.row.status?"处理中":"处理完成"))])]}}],null,!1,2704473529)})],1):t._e(),t._v(" "),n("el-col",{staticClass:"paginationt",attrs:{span:24}},[n("el-pagination",{staticClass:"pagination",attrs:{layout:"prev, pager, next","page-size":10,"page-count":t.total},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),t._m(0)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"query"}},[e("canvas",{attrs:{id:"canvas"}})])}]};var l=n("VU/8")(r,c,!1,function(t){n("w2nL"),n("qevo")},"data-v-32689135",null);e.default=l.exports},qevo:function(t,e){},w2nL:function(t,e){}});
//# sourceMappingURL=16.62adf13a563cca892e1a.js.map